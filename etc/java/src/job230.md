# job230

## 0. 금리커브 단위로 반복&#x20;

```java
for(Map.Entry<String, IrCurve> irCrv : irCurveMap.entrySet())
```

{

## 1. check

```java
if(!irCurveSwMap.containsKey(irCrv.getKey())) {
	log.warn("No Ir Curve /Data [{}] in Smith-Wilson Map for [{}]"
	, irCrv.getKey()
	, bssd);
	continue;
}
```

## 2. delete&#x20;

```java
int delNum = session.createQuery("delete IrSprdAfnsBiz a 
               where baseYymm=:param1 
               and a.irModelNm=:param2 and a.irCurveNm=:param3")
               			.setParameter("param1", bssd) 
               			.setParameter("param2", irModelNm)
               			.setParameter("param3", irCrv.getKey())
               			.executeUpdate();	

log.info("[{}] has been Deleted in Job:[{}] [IR_CURVE_NM: {}, COUNT: {}]"
               , Process.toPhysicalName(IrSprdAfnsBiz.class.getSimpleName())
               , jobLog.getJobId()
               , irCrv.getKey()
               , delNum);
```

## 3. biz logic&#x20;

```java
List<IrSprdAfnsBiz> afnsBizList = 
Esg230_BizSprdAfns.createBizAfnsShockScenario (bssd, irModelNm, irCrv.getKey());
afnsBizList.stream().forEach(s -> session.save(s));
```

}

## 4. log&#x20;

```java
completeJob("SUCCESS", jobLog);
```

