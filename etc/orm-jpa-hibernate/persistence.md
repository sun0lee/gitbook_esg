---
description: Hibernate는 객체 영속화를 편리하게 할 수 있도록 도와주는 프레임워크.
---

# persistence의 필요성과 어려움

### 두 개의 세상 &#x20;

1. 자바 세계
   * 객체(현실세계를 모델링하는 상태(state)와 행동(behavior)을 나타냄) 를 다룬다.
2. 관계형 데이터베이스 세계
   * row, column 형태로 데이터간의 관계(relationship) 및 연관관계(association)를 나태냄.&#x20;



### 기존에 있던 연결고리&#x20;

1. JDBC API&#x20;
   * 자바에서 DB접근을 위한 표준도구 (Java Database Connecntivity API)
   * JDBC는 데이터베이스 속성에 기반을 둔 커넥션 생성 API를 제공.&#x20;
     * dirver : 데이터베이스 제공자가 DB연결 매커니즘을 가지고 있는 클래스를 구현함  &#x20;
2. Mybatis&#x20;
   * DAO pattern



### 패러다임 불일치&#x20;

상속 및 다형성과 같은 개념이 RDB에는 없음. join 으로 연계된 정보를 읽어올 수는 있으나 관계에 대한 구조를 이미 잘 알고 있어야 하고, 주객 방향성이라는 개념도 없음

동일성을 판단하는 기준 역시 java에서는 주소가 같은지 (==), 값이 같은지 eqaul() 로 판단하는 반면 RDB에서는 primary key 값을 기준으로 판단함. java는 여러 개의 객체가 실제로 DB상의 같은 row의 데이터를 참고하더라도 주소가 다른 경우 다르다고 판단할 수 있는 소지가 있음.&#x20;

|                    Java                    |                    RDB                   |
| :----------------------------------------: | :--------------------------------------: |
|       상속 (방향성 있음), Polynorphism(다형성)       | (언제나 양방향), 하위타입 상속 x, 타입상속 x, 테이블 상속 x   |
| 연관관계 (일대일, 일대다, 다대다 ), navigation (데이터 탐색) |                 fk, join                 |
|   identity (주소가 같니 ?), equality (값이 같니? )  | Primary Key (natural key, surrogate key) |
|                   객체 모델링                   |            데이터 중심(테이블 설계) 모델링            |
|     Granularity ; UDT (user data type)     |                 표준데이터 타입                 |
|        n+1 문제 (미리 연결된것들 다읽어서 성능 비효율)       |  효율성은 join하는 사람이 DB구조를 잘 알고 있냐에 달려있음 !!  |

객체를 persistent (영속화) 하는 과정에서 RDB와의 불일치하는 컨셉들로 인해 테이블 위주로 객체를 설계하게 됨

&#x20;\-> 설계방향이 객체 지향적이지 않게 됨. (DB모델에 의존성을 갖게 됨)



### 결론&#x20;

시스템에서 객체 영속화가 필요한 건 기정사실임. 기존에는 jdbc, sql을 직접 이용해서, 아키텍쳐 자체의 layer를 구분해서 설계하는 등 비즈니스 로직과 영속화 로직을 분리하여 접근하는 방향들을 강구함. 어쨌든 시간과 비용이 많이 들어가는 일임. &#x20;

Java 진영에서는 이 문제를 근본적으로 해결하기 위해 JPA와 같은 표준명세를 만듦. hibernate는 JPA의 구현체 중 하나로 객체를 RDB의 테이블 데이터로 자동으로 영속화하는 기능을 수행함.&#x20;

하고 싶은 건 결국 성공적인 영속화, 그리고 비즈니스 로직과 영속화 로직을 분리해서 비즈니스 로직 영역 설계에 집중할 수 있도록 하는 것. 즉, 영속화에 너무 많은 시간과 비용을 쓰고 싶지 않은 것임.&#x20;

이제 이걸 사용하기 위해 알아야 하는 건 JPA의 기능 명세, Hibernate 사용법&#x20;

[#undefined-2](persistence.md#undefined-2 "mention")를 해결하는 과정 이해하기 &#x20;





### 참고&#x20;

{% embed url="https://victorydntmd.tistory.com/195" %}
